<mujoco model="00-elevator">
    <option cone="elliptic" impratio="10"/>
    <compiler angle="radian" autolimits="true" meshdir="../meshes/"/>

    <asset>
        <material name="grey" rgba="0.52941 0.54902 0.54902 1"/>
        <material name="light_grey" rgba="0.89804 0.91765 0.92941 1"/>
        <material name="invisible" rgba="1 0 0 0"/>
        <mesh name="rotate_rod1_mesh" file="rotate_rod1.STL"/>
        <mesh name="rotate_rod2_mesh" file="rotate_rod2.STL"/>
        <mesh name="rotate_rod3_mesh" file="rotate_rod3.STL"/>
    </asset>

    <worldbody>
        <light pos="0 0 1"/>
        <geom name="ground" type="plane" size="0 0 0.1" rgba="0.9 0.9 0.9 1"/>
        <body name="dumdum" pos="0.5 -0.5 0">
            <joint type="free"/>
            <geom type="box" density="100" size="0.1 0.1 0.1"  material="grey"/>
            <site name="tendon_site_end_left" pos="0.05 0.05 0.1" size="0.015" rgba="0 0.8 0 1"/>
            <site name="tendon_site_end_right" pos="-0.05 -0.05 0.1" size="0.015" rgba="0 0.8 0 1"/>
        </body>
        <body name="base_link" pos="0 0 0.3">
            <body name="rotate_rod1" pos="0.06 0 0" euler="0 0 1.5708">
                <joint name="rotate_rod_joint1" type="hinge" axis="0 0 1" range="-1.5 1.5" damping="100" />

                <geom type="mesh" mesh="rotate_rod1_mesh" material="grey"/>

                <body name="rotate_rod2" pos="0.032502 -0.056294 -0.084994" euler="1.5708 2.0944 1.0585 ">
                    <joint name="rotate_rod_joint2" type="hinge" axis="0 0 1" range="-2.41 -1" damping=".1"/>
                    <site name="tendon_site_start_left" pos="-0.91 -0.15 0" size="0.015" rgba="0 0.8 0 1"/>
                    <site name="tendon_site_start_right" pos="-0.92 -0.16 0" size="0.015" rgba="0 0.8 0 1"/>
                    <geom type="mesh" mesh="rotate_rod2_mesh" material="light_grey"/>
    
                    <body name="prism_rod_top" pos="-0.785 0.04 0" euler="0 0 3.1415">
                        <joint name="prism_rod_top_joint" type="hinge" axis="0 0 1" range="0 1" damping=".1"/>
                        <geom type="box" size="0.2 0.01 0.01" pos="-0.2 0 0" material="light_grey"/>
                        <site name="top_socket" pos="-0.4 0 0" size="0.01" rgba="1 0 0 1"/>
                    </body>
                </body>

                <body name="prism_rod_bottom" pos="0.032502 -0.055 0.12" euler="-1.5708 1.0585 2.0944">
                <joint name="prism_rod_bottom_joint" type="hinge" axis="0 0 1" range="-1 2" damping=".1"/>

                <geom type="box" size="0.2 0.01 0.01" pos="-0.2 0 0" material="light_grey"/>

                    <body name="piston_rod" pos="0 0 0" euler="0 0 3.1415">
                    <joint name="slider" type="slide" axis="1 0 0" range="-0.5 0" />
                    <geom type="capsule" fromto="0 0 0 0.1 0 0" size="0.012" material="invisible"/>
                    <site name="piston_tip" pos="0.1 0 0" size="0.01" rgba="1 0 0 1"/>
                    </body>
                </body>
            </body>
        </body>
    </worldbody>

    <contact>
        <exclude body1="piston_rod" body2="prism_rod_top"/>
        <exclude body1="piston_rod" body2="prism_rod_bottom"/>
        <exclude body1="piston_rod" body2="rotate_rod2"/>
        <exclude body1="piston_rod" body2="rotate_rod1"/>
        <exclude body1="prism_rod_bottom" body2="rotate_rod2"/>
        <exclude body1="rotate_rod1" body2="rotate_rod2"/>

        <exclude body1="prism_rod_top" body2="rotate_rod2"/>
        <exclude body1="prism_rod_top" body2="prism_rod_bottom"/>
    </contact>

    <equality>
        <connect site1="piston_tip" site2="top_socket" />
    </equality>

    <tendon>
        <spatial name="pull_tendon_left" width="0.005" rgba="0.8 0.8 0 1" stiffness="500" damping="5" springlength="0.2">
            <site site="tendon_site_start_left"/>
            <site site="tendon_site_end_left"/>
        </spatial>
        <spatial name="pull_tendon_right" width="0.005" rgba="0.8 0.8 0 1" stiffness="500" damping="5" springlength="0.2">
            <site site="tendon_site_start_right"/>
            <site site="tendon_site_end_right"/>
        </spatial>
    </tendon>

    <actuator>
        <motor name="piston_motor" joint="slider" gear="500" ctrllimited="true" ctrlrange="0 1"/>
        <position name="rotate_motor" joint="rotate_rod_joint1" kp="100" ctrllimited="true" ctrlrange="-1.5 1.5"/>
    </actuator>

</mujoco>
